
<template>
  <div class="product-details-page pt-12" v-if="product">
    <!--//////////header///////////-->
    <Header />
    <!--////////Breadcrumb//////////-->
    <breadcumb v-if="breadcrumb" :breadcrumb="breadcrumb" />
    <div class="single-product-block py-6">
      <div class="container max-w-8xl mx-auto md:px-8 2xl:px-16">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-7">
          <div class="product-details-image px-4 sm:px-4 md:px-0 2xl:px-0">
            <ul
              class="grid grid-cols-2 lg:grid-cols-2 md:gap-3 sm:gap-2 xs:gap-1"
            >
              <li v-for="item in product.images" :key="item.url">
                <div
                  v-on:click="preViewimage(item.url)"
                  id="open-btn"
                  class="product-img flex cursor-pointer"
                >
                  <img
                    :src="item.url"
                    alt="Armani Veni Vidi Vici"
                    class="
                      bg-gray-300
                      w-full
                      transition
                      duration-200
                      ease-in
                      group-hover:rounded-b-none
                      hover:rounded-none
                    "
                  />
                </div>
              </li>
            </ul>
          </div>
          <div class="product-details-des">
            <div
              class="
                border-b border-slate-100
                pb-4
                pr-32
                relative
                mb-3
                px-4
                sm:px-4
                md:px-0
                2xl:px-0
                md:pr-14
                2xl:pr-20
              "
            >
              <h3
                class="
                  font-medium
                  text-sm
                  sm:text-base
                  md:text-lg
                  capitalize
                  text-gray-700
                "
              >
                {{ product.name | truncate(30, '...')}}
              </h3>

              <div
                class="share-report absolute flex items-center right-0 top-0"
              >
                <!-- <button class="btn btn-info" data-toggle="modal" data-target="#exampleModal">show modal</button>
    <example-modal></example-modal> -->

                <a
                  v-on:click="openModal()"
                  title="Report"
                  class="inline-block mr-2 p-2"
                  ><svg
                    width="20"
                    height="17"
                    viewBox="0 0 24 21"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M10.528 1.2833C10.9773 1.03035 11.4842 0.897461 11.9998 0.897461C12.5154 0.897461 13.0223 1.03035 13.4716 1.2833C13.9209 1.53626 14.2974 1.90074 14.5648 2.34158L14.5677 2.34633L23.0376 16.4863L23.0458 16.5001C23.3077 16.9538 23.4463 17.4681 23.4478 17.9919C23.4493 18.5158 23.3135 19.0308 23.0541 19.4859C22.7947 19.941 22.4207 20.3203 21.9692 20.5859C21.5177 20.8516 21.0046 20.9944 20.4808 21.0001L20.4698 21.0003L3.52978 21.0002H3.51879C2.99498 20.9944 2.48182 20.8516 2.03035 20.5859C1.57887 20.3203 1.20483 19.941 0.945426 19.4859C0.686022 19.0308 0.550303 18.5158 0.55177 17.9919C0.553236 17.4681 0.691839 16.9538 0.953786 16.5001L0.961909 16.4863L9.43191 2.34633L10.2898 2.86019L9.43478 2.34158C9.70218 1.90074 10.0787 1.53626 10.528 1.2833ZM11.146 3.37684L2.68246 17.506C2.59729 17.6558 2.55224 17.8251 2.55176 17.9975C2.55127 18.1721 2.59651 18.3438 2.68298 18.4955C2.76945 18.6472 2.89413 18.7736 3.04462 18.8622C3.1938 18.95 3.36317 18.9975 3.53617 19.0002H20.4634C20.6364 18.9975 20.8058 18.95 20.9549 18.8622C21.1054 18.7736 21.2301 18.6472 21.3166 18.4955C21.403 18.3438 21.4483 18.1721 21.4478 17.9975C21.4473 17.8251 21.4023 17.6559 21.3171 17.5061L12.8548 3.37883L12.8536 3.37684C12.7645 3.23079 12.6395 3.11001 12.4904 3.02607C12.3406 2.94176 12.1716 2.89746 11.9998 2.89746C11.8279 2.89746 11.6589 2.94176 11.5092 3.02607C11.3601 3.11001 11.235 3.23079 11.146 3.37684ZM11.9998 7.00021C12.5521 7.00021 12.9998 7.44792 12.9998 8.00021V12.0002C12.9998 12.5525 12.5521 13.0002 11.9998 13.0002C11.4475 13.0002 10.9998 12.5525 10.9998 12.0002V8.00021C10.9998 7.44792 11.4475 7.00021 11.9998 7.00021ZM11.9998 15.0002C11.4475 15.0002 10.9998 15.4479 10.9998 16.0002C10.9998 16.5525 11.4475 17.0002 11.9998 17.0002H12.0098C12.5621 17.0002 13.0098 16.5525 13.0098 16.0002C13.0098 15.4479 12.5621 15.0002 12.0098 15.0002H11.9998Z"
                      fill="#a3acb9"
                    />
                  </svg>
                  <!-- <report-listing></report-listing> -->
                </a>
                <a href="#" title="Share" class="inline-block p-2">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M18.6 2.18182C17.385 2.18182 16.4 3.15865 16.4 4.36364C16.4 4.74231 16.4973 5.09844 16.6684 5.40882C16.6797 5.4258 16.6906 5.44319 16.7011 5.46098C16.7115 5.47866 16.7213 5.49651 16.7306 5.5145C17.1188 6.13344 17.8109 6.54545 18.6 6.54545C19.815 6.54545 20.8 5.56862 20.8 4.36364C20.8 3.15865 19.815 2.18182 18.6 2.18182ZM15.4738 7.43434C16.2712 8.23273 17.3774 8.72727 18.6 8.72727C21.0301 8.72727 23 6.77361 23 4.36364C23 1.95367 21.0301 0 18.6 0C16.1699 0 14.2 1.95367 14.2 4.36364C14.2 4.7749 14.2574 5.17288 14.3646 5.55013L8.52608 8.9292C7.7287 8.13087 6.62258 7.63636 5.4 7.63636C2.96995 7.63636 1 9.59003 1 12C1 14.41 2.96995 16.3636 5.4 16.3636C6.62286 16.3636 7.7292 15.8689 8.52663 15.0702L14.366 18.4449C14.2579 18.8236 14.2 19.2233 14.2 19.6364C14.2 22.0463 16.1699 24 18.6 24C21.0301 24 23 22.0463 23 19.6364C23 17.2264 21.0301 15.2727 18.6 15.2727C17.3793 15.2727 16.2746 15.7658 15.4775 16.562L9.63557 13.1859C9.74269 12.8088 9.8 12.411 9.8 12C9.8 11.5887 9.74262 11.1907 9.63536 10.8134L15.4738 7.43434ZM7.26994 10.85C7.27908 10.8676 7.28875 10.8852 7.29895 10.9025C7.30924 10.92 7.31994 10.9371 7.33104 10.9538C7.50251 11.2644 7.6 11.6209 7.6 12C7.6 12.3787 7.5027 12.7349 7.33155 13.0453C7.32014 13.0624 7.30915 13.08 7.2986 13.0979C7.28835 13.1154 7.27865 13.133 7.26949 13.1507C6.88126 13.7697 6.18915 14.1818 5.4 14.1818C4.18497 14.1818 3.2 13.205 3.2 12C3.2 10.795 4.18497 9.81818 5.4 9.81818C6.18946 9.81818 6.8818 10.2306 7.26994 10.85ZM16.4 19.6364C16.4 19.2816 16.4854 18.9466 16.6369 18.6505C16.664 18.6151 16.6893 18.5777 16.7124 18.5383C16.7346 18.5005 16.7542 18.462 16.7714 18.4229C17.1662 17.8389 17.8378 17.4545 18.6 17.4545C19.815 17.4545 20.8 18.4314 20.8 19.6364C20.8 20.8413 19.815 21.8182 18.6 21.8182C17.385 21.8182 16.4 20.8413 16.4 19.6364Z"
                      fill="#a3acb9"
                    />
                  </svg>
                </a>
              </div>
            </div>

            <div
              class="
                pb-4
                mb-6
                border-b border-slate-100
                px-4
                sm:px-4
                md:px-0
                2xl:px-0
              "
            >
              <div class="view mb-3">
                <ul class="flex items-center">
                  <li
                    v-if="!isListingOwner"
                    class="text-xsb mr-2 text-gray-500 pr-2 position-relative"
                  >
                    {{ listingStatistics.viewCount }} View<span
                      v-if="listingStatistics.viewCount > 1"
                      >s</span
                    >
                  </li>
                  <li
                    v-if="!isListingOwner"
                    class="text-xsb mr-2 text-gray-500 pr-2"
                  >
                    {{ listingStatistics.favouriteCount }} Like<span
                      v-if="listingStatistics.favouriteCount > 1"
                      >s</span
                    >
                  </li>
                  <li class="text-xsb text-gray-500">
                    Posted on {{ transformDate(product.publishedDate) }}
                  </li>
                </ul>
              </div>

              <!-- For Offer Owner the View Like Deal Section -->
              <ul class="flex items-center mb-4" v-if="isListingOwner">
                <li
                  class="
                    text-xsb
                    mr-4
                    text-gray-500
                    pr-2
                    position-relative
                    flex
                    items-center
                  "
                  title="Views"
                >
                  <svg
                    width="22"
                    height="16"
                    viewBox="0 0 24 18"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M23.9523 8.52824C23.0114 6.09429 21.3779 3.98941 19.2536 2.47374C17.1294 0.958072 14.6077 0.0980611 12 0C9.39234 0.0980611 6.87056 0.958072 4.74636 2.47374C2.62215 3.98941 0.988616 6.09429 0.047661 8.52824C-0.015887 8.70401 -0.015887 8.89649 0.047661 9.07226C0.988616 11.5062 2.62215 13.6111 4.74636 15.1268C6.87056 16.6424 9.39234 17.5024 12 17.6005C14.6077 17.5024 17.1294 16.6424 19.2536 15.1268C21.3779 13.6111 23.0114 11.5062 23.9523 9.07226C24.0159 8.89649 24.0159 8.70401 23.9523 8.52824V8.52824ZM12 16.0005C7.75988 16.0005 3.27975 12.8564 1.65571 8.80025C3.27975 4.74413 7.75988 1.60005 12 1.60005C16.2401 1.60005 20.7202 4.74413 22.3443 8.80025C20.7202 12.8564 16.2401 16.0005 12 16.0005Z"
                      fill="#8EC23C"
                    />
                    <path
                      d="M12 4.00012C11.0506 4.00012 10.1225 4.28165 9.33315 4.80909C8.54378 5.33654 7.92853 6.08622 7.56522 6.96333C7.20191 7.84044 7.10685 8.80558 7.29206 9.73672C7.47728 10.6679 7.93445 11.5232 8.60576 12.1945C9.27707 12.8658 10.1324 13.3229 11.0635 13.5082C11.9946 13.6934 12.9598 13.5983 13.8369 13.235C14.714 12.8717 15.4637 12.2564 15.9911 11.4671C16.5186 10.6777 16.8001 9.74964 16.8001 8.80026C16.8001 7.52718 16.2944 6.30625 15.3942 5.40605C14.494 4.50585 13.273 4.00012 12 4.00012ZM12 12.0003C11.367 12.0003 10.7483 11.8127 10.2221 11.461C9.69584 11.1094 9.28568 10.6096 9.04347 10.0249C8.80126 9.44014 8.73789 8.79671 8.86137 8.17595C8.98484 7.55519 9.28962 6.98499 9.73716 6.53745C10.1847 6.08991 10.7549 5.78513 11.3757 5.66166C11.9964 5.53818 12.6398 5.60155 13.2246 5.84376C13.8093 6.08597 14.3091 6.49613 14.6607 7.02238C15.0124 7.54864 15.2001 8.16734 15.2001 8.80026C15.2001 9.64897 14.8629 10.4629 14.2628 11.0631C13.6626 11.6632 12.8487 12.0003 12 12.0003Z"
                      fill="#8EC23C"
                    />
                  </svg>

                  <span class="ml-3">{{ listingStatistics.viewCount }}</span>
                </li>
                <li
                  class="text-xsb mr-4 text-gray-500 pr-2 flex items-center"
                  title="Likes"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <g clip-path="url(#clip0_619_25469)">
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M11.9694 2.3946C12.6005 2.13312 13.2769 1.99854 13.96 1.99854C14.643 1.99854 15.3194 2.13312 15.9505 2.3946C16.5814 2.65602 17.1547 3.03918 17.6375 3.52218C18.1205 4.00502 18.5039 4.57854 18.7654 5.20948C19.0268 5.84053 19.1614 6.51692 19.1614 7.2C19.1614 7.88308 19.0268 8.55946 18.7654 9.19051C18.5039 9.82151 18.1207 10.3948 17.6376 10.8777C17.6376 10.8777 17.6377 10.8776 17.6376 10.8777L10.5656 17.9497C10.2532 18.2621 9.7467 18.2621 9.43428 17.9497L2.36228 10.8777C1.38689 9.9023 0.838928 8.5794 0.838928 7.2C0.838928 5.8206 1.38689 4.49769 2.36228 3.52231C3.33766 2.54693 4.66056 1.99896 6.03996 1.99896C7.41936 1.99896 8.74226 2.54693 9.71765 3.52231L9.99996 3.80463L10.2821 3.52244C10.2822 3.5224 10.2821 3.52249 10.2821 3.52244C10.765 3.03938 11.3385 2.65605 11.9694 2.3946ZM13.96 3.59854C13.4871 3.59854 13.0188 3.69171 12.5819 3.87273C12.145 4.05375 11.7481 4.31908 11.4138 4.65355L10.5656 5.50168C10.2532 5.8141 9.7467 5.8141 9.43428 5.50168L8.58628 4.65368C7.91095 3.97836 6.99501 3.59896 6.03996 3.59896C5.08491 3.59896 4.16897 3.97836 3.49365 4.65368C2.81832 5.32901 2.43893 6.24494 2.43893 7.2C2.43893 8.15505 2.81832 9.07099 3.49365 9.74631L9.99996 16.2526L16.5063 9.74631C16.8407 9.412 17.1062 9.01493 17.2872 8.57805C17.4683 8.14116 17.5614 7.6729 17.5614 7.2C17.5614 6.7271 17.4683 6.25883 17.2872 5.82195C17.1062 5.38506 16.8409 4.98813 16.5064 4.65381C16.1721 4.31934 15.7749 4.05375 15.338 3.87273C14.9011 3.69171 14.4329 3.59854 13.96 3.59854Z"
                        fill="#EE2A7B"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_619_25469">
                        <rect
                          width="19.2"
                          height="19.2"
                          fill="white"
                          transform="translate(0.399994 0.399902)"
                        />
                      </clipPath>
                    </defs>
                  </svg>
                  <span class="ml-3">{{
                    listingStatistics.favouriteCount
                  }}</span>
                </li>
                <li
                  class="text-xsb mr-4 text-gray-500 pr-2 flex items-center"
                  title="Question & Answers"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M4.4 3.6C4.18783 3.6 3.98434 3.68429 3.83431 3.83431C3.68429 3.98434 3.6 4.18783 3.6 4.4V15.2686L5.43431 13.4343C5.58434 13.2843 5.78783 13.2 6 13.2H15.6C15.8122 13.2 16.0157 13.1157 16.1657 12.9657C16.3157 12.8157 16.4 12.6122 16.4 12.4V4.4C16.4 4.18783 16.3157 3.98434 16.1657 3.83431C16.0157 3.68429 15.8122 3.6 15.6 3.6H4.4ZM2.70294 2.70294C3.15303 2.25286 3.76348 2 4.4 2H15.6C16.2365 2 16.847 2.25286 17.2971 2.70294C17.7471 3.15303 18 3.76348 18 4.4V12.4C18 13.0365 17.7471 13.647 17.2971 14.0971C16.847 14.5471 16.2365 14.8 15.6 14.8H6.33137L3.36569 17.7657C3.13689 17.9945 2.79279 18.0629 2.49385 17.9391C2.19491 17.8153 2 17.5236 2 17.2V4.4C2 3.76348 2.25286 3.15303 2.70294 2.70294Z"
                      fill="#4B6E82"
                    />
                  </svg>
                  <span class="ml-3">{{ listingStatistics.chatCount }}</span>
                </li>
                <li
                  class="text-xsb mr-2 text-gray-500 pr-2 flex items-center"
                  title="Offers"
                >
                  <svg
                    width="24"
                    height="15"
                    viewBox="0 0 24 15"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M0 11.9999V2.5199V2.3999H3.6V11.0399C3.6 11.6159 3.12 11.9199 2.88 11.9999H0Z"
                      fill="#48CEF3"
                    />
                    <path
                      d="M24 11.9999V2.5199V2.3999H20.4V11.0399C20.4 11.6159 20.88 11.9199 21.12 11.9999H24Z"
                      fill="#48CEF3"
                    />
                    <path
                      d="M4.67999 2.16L7.31999 0H10.68C10.44 0.24 9.59999 1.056 8.15999 2.4C5.99999 4.56 7.31999 6.12 7.67999 6.72C9.50399 8.544 11.72 6.84 12.6 5.76C13.88 6.84 16.848 9.384 18.48 10.92C18.48 13.68 16.2 12.36 15.96 12.6C14.04 15.84 12.48 13.56 12.12 13.56C11.448 14.616 9.99999 14.48 9.35999 14.28L5.39999 10.56H4.67999V2.16Z"
                      fill="#48CEF3"
                    />
                    <path
                      d="M16.7999 0H12.4799C11.6799 0.72 9.71992 2.544 8.27993 4.08C7.79993 6.288 9.43993 6.28 10.3199 6C11.0399 5.36 12.6959 3.912 13.5599 3.24C14.4239 2.568 14.5599 3.52 14.5199 4.08L13.5599 5.04L19.1999 9.6V2.28L16.7999 0Z"
                      fill="#48CEF3"
                    />
                    <circle
                      cx="1.5789"
                      cy="10.0268"
                      r="0.947368"
                      fill="white"
                    />
                    <circle
                      cx="22.4211"
                      cy="10.0268"
                      r="0.947368"
                      fill="white"
                    />
                  </svg>

                  <span class="ml-3">{{ listingStatistics.dealCount }}</span>
                </li>
              </ul>

              <!-- End Of View like Deal For Offer Owner -->

              <!-- {{product?.location?.area}} -->

              <div class="flex flex-col sm:flex-col md:flex-row lg:flex-row">
                <ul class="flex items-center mb-3">
                  <li class="text-xsb mr-4 text-gray-500 pr-2">
                    Condition :
                    <span class="font-medium text-gray-600">{{
                      product.itemCondition
                    }}</span>
                  </li>
                  <li class="text-xsb mr-2 text-gray-500 pr-2">
                    Quantity :
                    <span class="font-medium text-gray-600"
                      >{{ product.quantity }} {{ product.unit
                      }}<span v-if="product.quantity > 1">s</span></span
                    >
                  </li>
                </ul>
                <div class="text-xsb text-gray-500 mb-3">
                  Location :
                  <span
                    v-if="product.location.city"
                    class="font-medium text-gray-600"
                    >{{ product.location.city }}</span
                  >
                </div>
              </div>
              <div class="mb-4 flex items-center">
                <span v-if="product.exchangeMode === 'Barter'" class="text-xsb text-gray-500 pr-4 block"
                  >Market Value :
                </span>
                <span v-if="product.exchangeMode === 'Money'" class="text-xsb text-gray-500 pr-4 block"
                  >Price :
                </span>

              <span
                  class="text-xsb text-gray-600 flex items-center font-medium"
                >
                  <svg
                    width="7"
                    height="14"
                    viewBox="0 0 11 18"
                    fill="none"
                    class="mr-1"
                  >
                    <path
                      opacity="0.7"
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M0 0.787369C0 0.352518 0.352517 0 0.787369 0H9.71263C10.1475 0 10.5 0.352517 10.5 0.787369C10.5 1.22222 10.1475 1.57474 9.71263 1.57474L7.423 1.57474C8.15198 2.31524 8.65471 3.26904 8.82286 4.33052H9.71263C10.1475 4.33052 10.5 4.68304 10.5 5.11789C10.5 5.55274 10.1475 5.90526 9.71263 5.90526H8.82288C8.4344 8.35801 6.25946 10.2358 3.63462 10.2358H2.28446L8.85412 16.6402C9.16954 16.9477 9.16954 17.4462 8.85412 17.7537C8.5387 18.0612 8.02729 18.0612 7.71187 17.7537L0 10.2359L3.52184e-05 10.2358H0V9.6611C0 9.10882 0.447716 8.6611 1 8.6611H3.63462C5.36438 8.6611 6.81192 7.48316 7.17918 5.90526L0.78737 5.90526C0.352518 5.90526 0 5.55274 0 5.11789C0 4.68304 0.352517 4.33052 0.787369 4.33052L7.17915 4.33052C6.81185 2.75267 5.36434 1.57478 3.63462 1.57478H0.787369C0.352517 1.57478 0 1.22226 0 0.787408V0.787369Z"
                      fill="black"
                    />
                  </svg>
              <span >{{ product.price}}</span> <span v-if="product.exchangeMode === 'Barter'">{{ product.unitOfferValuation}}</span>
                </span>


                <span  v-if="product.exchangeMode === 'Money'"
                  class="text-xsb text-gray-600 flex items-center font-medium"
                >
                  <svg
                    width="7"
                    height="14"
                    viewBox="0 0 11 18"
                    fill="none"
                    class="mr-1"
                  >
                    <path
                      opacity="0.7"
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M0 0.787369C0 0.352518 0.352517 0 0.787369 0H9.71263C10.1475 0 10.5 0.352517 10.5 0.787369C10.5 1.22222 10.1475 1.57474 9.71263 1.57474L7.423 1.57474C8.15198 2.31524 8.65471 3.26904 8.82286 4.33052H9.71263C10.1475 4.33052 10.5 4.68304 10.5 5.11789C10.5 5.55274 10.1475 5.90526 9.71263 5.90526H8.82288C8.4344 8.35801 6.25946 10.2358 3.63462 10.2358H2.28446L8.85412 16.6402C9.16954 16.9477 9.16954 17.4462 8.85412 17.7537C8.5387 18.0612 8.02729 18.0612 7.71187 17.7537L0 10.2359L3.52184e-05 10.2358H0V9.6611C0 9.10882 0.447716 8.6611 1 8.6611H3.63462C5.36438 8.6611 6.81192 7.48316 7.17918 5.90526L0.78737 5.90526C0.352518 5.90526 0 5.55274 0 5.11789C0 4.68304 0.352517 4.33052 0.787369 4.33052L7.17915 4.33052C6.81185 2.75267 5.36434 1.57478 3.63462 1.57478H0.787369C0.352517 1.57478 0 1.22226 0 0.787408V0.787369Z"
                      fill="black"
                    />
                  </svg>
                  {{ product.unitOfferValuation }}
                </span>
              </div>
              <div
                v-if="product.exchangeMode === 'Barter'"
                class="flex mb-6 items-center"
              >
                <span class="mr-2">
                  <svg width="20" height="19" viewBox="0 0 27 26" fill="none">
                    <path
                      d="M15.3564 2L23.0297 10.1683L1 10.6634"
                      stroke="#8BC63E"
                      stroke-width="3"
                    />
                    <path
                      d="M11.6436 24.5244L3.9703 16.3561L26 15.861"
                      stroke="#32CDF8"
                      stroke-width="3"
                    />
                  </svg>
                </span>
                <span class="text-sm text-gray-600 pr-4 font-medium block"
                  >Barter :
                </span>
                <span
                  class="text-sm text-gray-600 block px-2"
                  v-if="!product.desire.description"
                  >{{ product.desire.desireType }}</span
                >
                <span class="text-sm text-gray-600 block px-2"
                  >{{ product.desire.description }}
                </span>
              </div>

              <!-- For Listing Owner hide Delete Edit Copy section Start -->
              <div
                v-if="isListingOwner"
                class="
                  flex flex-wrap
                  items-center
                  w-full
                  justify-center
                  md:justify-start
                "
              >
                <a
                  href="#"
                  class="
                    border border-firoza
                    bg-transparent
                    px-3
                    sm:px-8
                    md:px-10
                    lg:px-10
                    rounded
                    block
                    text-firoza
                    font-medium
                    text-base
                    mr-8
                    h-12
                    leading-leading48
                  "
                  >open chat
                </a>
                <a
                  href="#"
                  class="
                    flex
                    items-center
                    justify-center
                    bg-transparent bg-white
                    rounded-sm
                    cursor-pointer
                    shadow-md
                    w-12
                    text-firoza
                    font-medium
                    text-base
                    mr-5
                    h-12
                  "
                  title="Edit Listing"
                >
                  <svg width="18" height="18" viewBox="0 0 27 27" fill="none">
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M21.5604 2.573C21.8266 2.46273 22.1119 2.40598 22.4001 2.40598C22.6882 2.40598 22.9735 2.46273 23.2397 2.573C23.5059 2.68326 23.7478 2.84488 23.9515 3.04862C24.1553 3.25237 24.3169 3.49424 24.4272 3.76044C24.5374 4.02664 24.5942 4.31196 24.5942 4.60009C24.5942 4.88823 24.5374 5.17355 24.4272 5.43974C24.3169 5.70595 24.1553 5.94782 23.9515 6.15157L9.39416 20.709L8.66592 19.3579C8.33215 18.7387 7.82429 18.2308 7.20508 17.8971L6.42217 17.4751L20.8486 3.04862C21.0523 2.84488 21.2942 2.68326 21.5604 2.573ZM4.81948 19.223L3.71034 23.2898L7.60149 22.2286L6.96886 21.0549C6.63509 20.4357 6.12723 19.9279 5.50803 19.5941L4.81948 19.223ZM22.4001 0.00598145C21.7968 0.00598145 21.1994 0.124811 20.642 0.355687C20.0846 0.586563 19.5782 0.924963 19.1515 1.35157L2.95155 17.5516C2.80388 17.6992 2.69731 17.8829 2.64236 18.0844L0.84236 24.6844C0.729054 25.0998 0.847048 25.5441 1.15155 25.8486C1.45605 26.1531 1.90036 26.2711 2.31582 26.1578L8.91582 24.3578C9.11729 24.3029 9.30094 24.1963 9.44861 24.0486L25.6486 7.84862C26.0752 7.42202 26.4136 6.91557 26.6445 6.35819C26.8754 5.8008 26.9942 5.2034 26.9942 4.60009C26.9942 3.99679 26.8754 3.39939 26.6445 2.842C26.4136 2.28462 26.0752 1.77817 25.6486 1.35157C25.222 0.924963 24.7156 0.586563 24.1582 0.355687C23.6008 0.124811 23.0034 0.00598145 22.4001 0.00598145Z"
                      fill="#494949"
                    />
                  </svg>
                </a>
                <a
                  href="#"
                  class="
                    flex
                    items-center
                    justify-center
                    bg-transparent bg-white
                    rounded-sm
                    cursor-pointer
                    shadow-md
                    w-12
                    text-firoza
                    font-medium
                    text-base
                    mr-5
                    h-12
                  "
                  title="Delete Listing"
                >
                  <svg
                    v-on:click="deleteListing()"
                    width="18"
                    height="18"
                    viewBox="0 0 24 28"
                    fill="none"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M8.75147 3.55152C8.97652 3.32648 9.28174 3.20005 9.6 3.20005H14.4C14.7183 3.20005 15.0235 3.32648 15.2485 3.55152C15.4736 3.77656 15.6 4.08179 15.6 4.40005V5.60005H8.4V4.40005C8.4 4.08179 8.52643 3.77656 8.75147 3.55152ZM6 5.60005V4.40005C6 3.44527 6.37929 2.52959 7.05442 1.85446C7.72955 1.17933 8.64522 0.800049 9.6 0.800049H14.4C15.3548 0.800049 16.2705 1.17933 16.9456 1.85446C17.6207 2.52959 18 3.44527 18 4.40005V5.60005H20.4H22.8C23.4627 5.60005 24 6.13731 24 6.80005C24 7.46279 23.4627 8.00005 22.8 8.00005H21.6V23.6C21.6 24.5548 21.2207 25.4705 20.5456 26.1456C19.8705 26.8208 18.9548 27.2 18 27.2H6C5.04522 27.2 4.12955 26.8208 3.45442 26.1456C2.77928 25.4705 2.4 24.5548 2.4 23.6V8.00005H1.2C0.537258 8.00005 0 7.46279 0 6.80005C0 6.13731 0.537258 5.60005 1.2 5.60005H3.6H6ZM4.8 8.00005V23.6C4.8 23.9183 4.92643 24.2235 5.15147 24.4486C5.37652 24.6736 5.68174 24.8 6 24.8H18C18.3183 24.8 18.6235 24.6736 18.8485 24.4486C19.0736 24.2235 19.2 23.9183 19.2 23.6V8.00005H16.8H7.2H4.8Z"
                      fill="#FC2323"
                    />
                  </svg>
                </a>
                <a
                  href="#"
                  class="
                    flex
                    items-center
                    justify-center
                    bg-transparent bg-white
                    rounded-sm
                    cursor-pointer
                    shadow-md
                    w-12
                    text-firoza
                    font-medium
                    text-base
                    mr-5
                    h-12
                  "
                  :title="btnTitle"
                >
                  <svg
                    v-if="!product.hidden"
                    v-on:click="hideListing()"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <g clip-path="url(#clip0_619_25834)">
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M11.9977 5.00002C11.3682 4.99854 10.7408 5.07025 10.1279 5.21371C9.59016 5.33958 9.05219 5.00569 8.92632 4.46794C8.80045 3.93019 9.13434 3.39222 9.67209 3.26634C10.4355 3.08765 11.2171 2.99828 12.0012 3.00003L12.0023 3.00003L12 4.00003V3.00003L12.0012 3.00003C15.9001 3.00046 18.8957 5.22667 20.8545 7.31608C21.8432 8.37062 22.5979 9.42134 23.1057 10.2075C23.3601 10.6015 23.5542 10.9317 23.686 11.166C23.752 11.2833 23.8025 11.3767 23.8372 11.4425C23.8546 11.4753 23.8681 11.5013 23.8777 11.5198L23.889 11.5421L23.8925 11.5489L23.8936 11.5512L21.858 11.9978C21.7488 11.8093 21.6044 11.5694 21.4256 11.2926C20.9646 10.5787 20.2818 9.62943 19.3955 8.68397C17.6045 6.77359 15.1005 5.00003 12 5.00003L11.9977 5.00002ZM21.858 11.9978C21.3406 12.8982 20.7439 13.7511 20.0748 14.5462C19.7193 14.9688 19.7736 15.5996 20.1962 15.9552C20.6187 16.3108 21.2496 16.2565 21.6052 15.8339C22.479 14.7953 23.2421 13.6684 23.8819 12.4714C24.0348 12.1854 24.0395 11.8429 23.8944 11.5528L21.858 11.9978C21.8892 12.0517 21.8326 11.9526 21.858 11.9978ZM5.4531 5.26525C5.85123 4.96123 6.41289 4.9987 6.76711 5.35292L10.5832 9.16899C10.5855 9.1713 10.5878 9.17361 10.5901 9.17594L14.824 13.4098C14.8264 13.4122 14.8287 13.4145 14.8311 13.4169L18.6471 17.2329C18.8511 17.4369 18.9571 17.7191 18.9378 18.007C18.9184 18.2949 18.7757 18.5604 18.5462 18.7353C16.6671 20.1677 14.3789 20.9613 12.0163 20.9999L12 21C8.10049 21 5.10448 18.7736 3.14546 16.684C2.15683 15.6294 1.40207 14.5787 0.894336 13.7926C0.63985 13.3985 0.445792 13.0684 0.313971 12.834C0.248023 12.7168 0.19754 12.6233 0.162753 12.5576C0.145357 12.5247 0.131875 12.4988 0.122338 12.4802L0.11099 12.458L0.107539 12.4512L0.10637 12.4488C0.10637 12.4488 0.105573 12.4472 1 12L0.105573 12.4472C-0.0397387 12.1566 -0.0347895 11.8135 0.118844 11.5272C1.43015 9.08345 3.24891 6.94839 5.4531 5.26525ZM2.14257 12.0032C2.25165 12.1916 2.39592 12.4311 2.57441 12.7075C3.03543 13.4213 3.71817 14.3706 4.60454 15.3161C6.39395 17.2248 8.89512 18.9969 11.9918 19C13.5373 18.9734 15.0437 18.5524 16.3714 17.7856L14.0497 15.464C13.891 15.5635 13.7251 15.652 13.5531 15.7286C13.0625 15.9472 12.5328 16.0648 11.9957 16.0742C11.4586 16.0837 10.9252 15.9849 10.4271 15.7837C9.92902 15.5826 9.47657 15.2831 9.09674 14.9033C8.71691 14.5235 8.41747 14.071 8.21629 13.5729C8.01511 13.0749 7.91631 12.5414 7.92579 12.0043C7.93527 11.4672 8.05282 10.9375 8.27145 10.4469C8.34805 10.2749 8.43652 10.109 8.53604 9.95028L5.9871 7.40134C4.45031 8.7014 3.14935 10.2582 2.14257 12.0032ZM10.0279 11.4421C9.96372 11.6346 9.92907 11.836 9.92548 12.0396C9.92074 12.3081 9.97014 12.5749 10.0707 12.8239C10.1713 13.0729 10.321 13.2992 10.511 13.4891C10.7009 13.679 10.9271 13.8287 11.1761 13.9293C11.4252 14.0299 11.6919 14.0793 11.9604 14.0745C12.164 14.071 12.3655 14.0363 12.5579 13.9721L10.0279 11.4421Z"
                        fill="#494949"
                      />
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M0.292893 0.292893C0.683417 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L23.7071 22.2929C24.0976 22.6834 24.0976 23.3166 23.7071 23.7071C23.3166 24.0976 22.6834 24.0976 22.2929 23.7071L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683417 0.292893 0.292893Z"
                        fill="#494949"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_619_25834">
                        <rect width="24" height="24" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>

                  <svg
                    v-if="product.hidden"
                    v-on:click="hideListing()"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M2.14074 12C2.25003 12.1889 2.39492 12.4296 2.57441 12.7075C3.03543 13.4213 3.71817 14.3706 4.60454 15.3161C6.39552 17.2264 8.89951 19 12 19C15.1005 19 17.6045 17.2264 19.3955 15.3161C20.2818 14.3706 20.9646 13.4213 21.4256 12.7075C21.6051 12.4296 21.75 12.1889 21.8593 12C21.75 11.8111 21.6051 11.5704 21.4256 11.2925C20.9646 10.5787 20.2818 9.6294 19.3955 8.68394C17.6045 6.77356 15.1005 5 12 5C8.89951 5 6.39552 6.77356 4.60454 8.68394C3.71817 9.6294 3.03543 10.5787 2.57441 11.2925C2.39492 11.5704 2.25003 11.8111 2.14074 12ZM23 12C23.8944 11.5528 23.8943 11.5524 23.8941 11.5521L23.8925 11.5489L23.889 11.542L23.8777 11.5198C23.8681 11.5013 23.8546 11.4753 23.8372 11.4424C23.8025 11.3767 23.752 11.2832 23.686 11.166C23.5542 10.9316 23.3601 10.6015 23.1057 10.2075C22.5979 9.42131 21.8432 8.3706 20.8545 7.31606C18.8955 5.22644 15.8995 3 12 3C8.10049 3 5.10448 5.22644 3.14546 7.31606C2.15683 8.3706 1.40207 9.42131 0.894336 10.2075C0.63985 10.6015 0.445792 10.9316 0.313971 11.166C0.248023 11.2832 0.19754 11.3767 0.162753 11.4424C0.145357 11.4753 0.131875 11.5013 0.122338 11.5198L0.11099 11.542L0.107539 11.5489L0.10637 11.5512C0.106186 11.5516 0.105573 11.5528 1 12L0.105573 11.5528C-0.0351909 11.8343 -0.0351909 12.1657 0.105573 12.4472L1 12C0.105573 12.4472 0.105389 12.4468 0.105573 12.4472L0.107539 12.4511L0.11099 12.458L0.122338 12.4802C0.131875 12.4987 0.145357 12.5247 0.162753 12.5576C0.19754 12.6233 0.248023 12.7168 0.313971 12.834C0.445792 13.0684 0.63985 13.3985 0.894336 13.7925C1.40207 14.5787 2.15683 15.6294 3.14546 16.6839C5.10448 18.7736 8.10049 21 12 21C15.8995 21 18.8955 18.7736 20.8545 16.6839C21.8432 15.6294 22.5979 14.5787 23.1057 13.7925C23.3601 13.3985 23.5542 13.0684 23.686 12.834C23.752 12.7168 23.8025 12.6233 23.8372 12.5576C23.8546 12.5247 23.8681 12.4987 23.8777 12.4802L23.889 12.458L23.8925 12.4511L23.8936 12.4488C23.8938 12.4484 23.8944 12.4472 23 12ZM23 12L23.8944 12.4472C24.0352 12.1657 24.0348 11.8336 23.8941 11.5521L23 12Z"
                      fill="#494949"
                    />
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10ZM8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12Z"
                      fill="#494949"
                    />
                  </svg>
                </a>

                <a
                  href="#"
                  class="
                    flex
                    items-center
                    justify-center
                    bg-transparent bg-white
                    rounded-sm
                    cursor-pointer
                    shadow-md
                    w-12
                    text-firoza
                    font-medium
                    text-base
                    mr-5
                    h-12
                  "
                  title="Copy Listing"
                >
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z"
                      fill="#48CEF3"
                    />
                  </svg>
                </a>

                <!-- <a href="#" class="transition-all border border-green bg-green px-8 sm:px-10 md:px-14 rounded block  font-medium text-base mr-8 h-12 leading-leading48 text-white hover:bg-firoza hover:border-firoza">suggest an offer</a> -->
                <!-- <button class="bg-green  px-8 md:px-12 font-medium text-base  text-white transition-all hover:bg-firoza rounded h-9" aria-label="suggest an offer">suggest an offer</button> -->
              </div>

              <!-- End of For Lisitng Owner -->

              <div
                v-if="!isListingOwner"
                class="
                  pb-3
                  fixed
                  bottom-0
                  bg-white
                  z-20
                  w-full
                  md:relative
                  pt-3
                  md:pt-0 md:border-none
                  left-0
                  shadow
                  md:shadow-none
                "
              >
                <div
                  class="
                    flex flex-wrap
                    items-center
                    w-full
                    justify-center
                    md:justify-start
                  "
                >
                  <a
                    href="#"
                    class="
                      border border-firoza
                      bg-transparent
                      px-3
                      sm:px-8
                      md:px-10
                      lg:px-10
                      rounded
                      block
                      text-firoza
                      font-medium
                      text-base
                      mr-8
                      h-12
                      leading-leading48
                    "
                    >chat now</a
                  >
                  <a
                    href="#"
                    class="
                      transition-all
                      border border-green
                      bg-green
                      px-8
                      sm:px-10
                      md:px-14
                      rounded
                      block
                      font-medium
                      text-base
                      mr-8
                      h-12
                      leading-leading48
                      text-white
                      hover:bg-firoza hover:border-firoza
                    "
                    >suggest an offer</a
                  >
                </div>
              </div>
            </div>

            <div
              v-if="product.facets"
              class="
                description-attachment
                border-b border-slate-100
                pb-4
                mb-5
                px-4
                sm:px-4
                md:px-0
                2xl:px-0
              "
            >
              <div class="product-features mb-5">
                <h4 class="text-base mb-4 font-medium text-gray-700">
                  Product Features
                </h4>
                <div
                  class="feature-row flex w-full mb-3"
                  v-for="item in product.facets"
                  :key="item.name"
                >
                  <div
                    class="
                      feature-name
                      w-2/6
                      text-xs
                      font-normal
                      text-gray-600
                      pr-2
                    "
                  >
                    {{ item.name }} :
                  </div>
                  <div
                    class="feature-ans w-4/6 text-xsb font-medium text-gray-700"
                  >
                    {{ item.values[0] }}
                  </div>
                </div>
              </div>
              <div class="product-description mb-5">
                <h4 class="text-base mb-4 font-medium text-gray-700">
                  Description
                </h4>
                <p class="text-sm text-gray-500 font-normal">
                  {{ product.description }}
                </p>
              </div>
              <div
                v-if="product.documents.length"
                class="document-attachment doc-two mb-5"
              >
                <h4 class="text-base mb-4 font-medium text-gray-700">
                  Attachment
                </h4>

                <ul class="flex items-center">
                  <li
                    v-for="item in product.documents"
                    :key="item.id"
                    class="mr-4"
                  >
                    <a
                      href="#"
                      v-on:click="preViewFile(item)"
                      class="
                        flex flex-wrap
                        items-center
                        p-3
                        shadow-md
                        text-xsb text-gray-500
                        pl-0
                        transition
                        relative
                        hover:text-green
                      "
                    >
                         <svg width="20" height="20" viewBox="0 0 24 24" fill="none"  class="yu"   >
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M5 4C5 3.44772 5.44772 3 6 3H13V6C13 7.65685 14.3431 9 16 9H19V20C19 20.5523 18.5523 21 18 21H6C5.44772 21 5 20.5523 5 20V4ZM17.5858 7L15 4.41421V6C15 6.55228 15.4477 7 16 7H17.5858ZM6 1C4.34315 1 3 2.34315 3 4V20C3 21.6569 4.34315 23 6 23H18C19.6569 23 21 21.6569 21 20V8C21 7.73478 20.8946 7.48043 20.7071 7.29289L14.7071 1.29289C14.5196 1.10536 14.2652 1 14 1H6ZM7 9C7 8.44772 7.44772 8 8 8H10C10.5523 8 11 8.44772 11 9C11 9.55229 10.5523 10 10 10H8C7.44772 10 7 9.55229 7 9ZM8 12C7.44772 12 7 12.4477 7 13C7 13.5523 7.44772 14 8 14H16C16.5523 14 17 13.5523 17 13C17 12.4477 16.5523 12 16 12H8ZM8 16C7.44772 16 7 16.4477 7 17C7 17.5523 7.44772 18 8 18H16C16.5523 18 17 17.5523 17 17C17 16.4477 16.5523 16 16 16H8Z" fill="#8CAEC5"/>
                                </svg>
                      <span class="pl-2"> {{ item.orgName | truncate(15, '...') }}</span>
                    </a>
                  </li>
                </ul>
              </div>
            </div>

            <div
              class="mb-5 px-4 sm:px-4 md:px-0 2xl:px-0"
              v-if="!isListingOwner"
            >
              <h4 class="text-base mb-4 font-medium text-gray-700">Sold by</h4>
              <a
                href=""
                class="px-4 py-2 pr-5 shadow-md items-center inline-block"
              >
                <div class="flex items-center">
                  <div
                    class="
                      h-10
                      w-10
                      bg-gray-200
                      flex
                      items-center
                      justify-center
                      rounded-full
                      mr-5
                      relative
                    "
                  >
                    <img
                      :src="product.user.imageUrl"
                      class="w-10 h-10 rounded-full"
                      :alt="product.user.name"
                    />

                    <span
                      class="
                        w-2.5
                        h-2.5
                        bg-green
                        block
                        absolute
                        left-0
                        bottom-1
                        rounded-full
                        border-2 border-white
                      "
                    ></span>
                  </div>
                  <div class="text-sm text-gray-600 font-medium mr-12">
                    {{ product.user.name }}
                    <span class="text-xs block font-normal">Online</span>
                  </div>
                  <div
                    class="text-gray-600 text-sm flex"
                    
                  >
                    <svg 
                      width="18"
                      height="18"
                      viewBox="0 0 22 22"
                      fill="none"
                      v-for="item in userRating"
                      :key="item.name"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M11.8221 1.42792C11.6677 1.11506 11.349 0.916992 11.0001 0.916992C10.6512 0.916992 10.3326 1.11506 10.1781 1.42792L7.5587 6.73459L1.70087 7.5908C1.35569 7.64125 1.06906 7.88326 0.961466 8.2151C0.85387 8.54694 0.943953 8.91109 1.19385 9.15449L5.4318 13.2822L4.43163 19.1137C4.37265 19.4576 4.51404 19.8052 4.79635 20.0103C5.07867 20.2154 5.45293 20.2424 5.76177 20.08L11.0001 17.3252L16.2384 20.08C16.5473 20.2424 16.9216 20.2154 17.2039 20.0103C17.4862 19.8052 17.6276 19.4576 17.5686 19.1137L16.5684 13.2822L20.8064 9.15449C21.0563 8.91109 21.1463 8.54694 21.0387 8.2151C20.9312 7.88326 20.6445 7.64125 20.2994 7.5908L14.4415 6.73459L11.8221 1.42792Z"
                        fill="#FF9500"
                      />
                    </svg>

                    <svg  v-if="!product.user.averageRating" width="18" height="18" viewBox="0 0 22 22" fill="none" >
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9053 1.51093C11.7509 1.19807 11.4323 1 11.0834 1C10.7345 1 10.4158 1.19807 10.2614 1.51093L7.64195 6.81759L1.78412 7.67381C1.43894 7.72426 1.15231 7.96626 1.04472 8.2981C0.937122 8.62994 1.02721 8.99409 1.27711 9.2375L5.51505 13.3653L4.51489 19.1967C4.4559 19.5406 4.59729 19.8882 4.8796 20.0933C5.16192 20.2984 5.53618 20.3254 5.84502 20.163L11.0834 17.4082L16.3217 20.163C16.6305 20.3254 17.0048 20.2984 17.2871 20.0933C17.5694 19.8882 17.7108 19.5406 17.6518 19.1967L16.6517 13.3653L20.8896 9.2375C21.1395 8.99409 21.2296 8.62994 21.122 8.2981C21.0144 7.96626 20.7278 7.72426 20.3826 7.67381L14.5248 6.81759L11.9053 1.51093Z" fill="#A5A3A1"/>
                                                </svg>

                    <span v-if="product.user.averageRating" class="pl-3 font-medium">{{
                      product.user.averageRating
                    }}</span>
                     <span v-else class="pl-3 font-medium">No Rating</span>
                  </div>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class="
        questioner-answer-sec
        my-4
        py-12
        border-slate-300 border-t border-b
      "
    >
      <div class="container max-w-8xl mx-auto px-4 md:px-8 2xl:px-16">
        <div class="no-question w-full text-center py-8">
          <h5 class="mb-3 text-base font-semibold text-gray-700">
            There are no questions yet 
          </h5>
          <div class="mb-4 text-gray-600 text-sm">
            Ask your questions if you have something
          </div>
          <a
            href="#"
            class="
              border border-firoza
              bg-transparent
              py-2
              px-4
              rounded
              inline-block
              text-firoza
              font-medium
              text-base
            "
            >ask a question</a
          >
        </div>
      </div>
    </div>

    <!--Similar listings from same user-->
    <SimilarListings :offerId="offerId" />
    <!--other listings from same user-->
    <UserAllListing :userdetails="userdetails" />
    <!--Modal to report Listing-->
    <div v-if="showmodal" class="container">
      <ReportListing ref="modal" :showmodal="showmodal"/> 
    </div>
    <!-- End Of Modal  report Listing-->

    <!--Start of Modal to Delete Listing-->
    <div v-if="showdeletemodal" class="container">
      <DeleteListing ref="modal" :deletedItemDetails="deletedItemDetails"/>
    </div>
    <!--End of Modal to delete Listing-->

    <!--Start of Modal to hide Listing-->
    <div v-if="showhidelistingmodal" class="container">
      <HideListing ref="modal" :hidingItemDetails="hidingItemDetails"/>
     
    </div>
    <!--End of Modal to hide Listing-->

    <carousel />
    <!--footer section goes here-->
    <Footer />
  </div>
</template>

<script>
import carousel from "~/components/carousel.vue";
import Breadcumb from "~/components/Breadcumb.vue";
import SimilarListings from "~/components/SimilarListings.vue";
import UserAllListing from "~/components/UserAllListings.vue";
import moment from "moment";
import { mapState, mapGetters } from "vuex";
export default {
 
  components: {
    Breadcumb,
    carousel,
    SimilarListings,
    UserAllListing
  },

  data() {
    return {
      product: null,
      user: "abc",
      listing_images: "",
      breadcrumb: [{}],
      viewImage: "",
      offerId: "",
      userdetails: { identityId: "", name: "" },
      listingStatistics: {},
      userRating: null,
      showmodal: false,
      showdeletemodal: false,
      showhidelistingmodal: false,
      btnTitle: "",
      deletedItemDetails: {
        offerId: "",
        showdeletemodal: "",
        offerImgUrl: "",
        listingName: "",
      },
      hidingItemDetails: {
        offerId: "",
        showhidelistingmodal: "",
        offerImgUrl: "",
        listingName: "",
        listingStaus: " ",
      },
      isListingOwner: false,
    };
  },
   computed: {
    ...mapState({
      authUser: (state) => state.authUser,
    }),
    ...mapGetters({
      isLoggedIn: "isLoggedIn",
    }),
  },
  mounted() {
    console.log("authUser", this.authUser.uid);
    let offerId = this.$route.params.slug;
    this.offerId = this.$route.params.slug;

    this.asyncData(offerId);
    this.getlistingStatistic(offerId);
  },
  created() {
    this.$on("closeModal", (section) => {
      this.showmodal = false;
      this.showdeletemodal = false;
      this.showhidelistingmodal = false;
    });
  },
  methods: {
    async asyncData(offerId) {
      try {
        let url = `/offers/v1/offers/oid/${offerId}`;
        const data = await this.$axios.$get(url);
        this.product = data.payload;
        this.offerId = this.product.offerId;
        this.userdetails.identityId = this.product.user.identityId;
        this.userdetails.name = this.product.user.name;
        let breadcumbobj = this.spliceBreadcumbObj(this.product);
        this.breadcrumb = this.getBreadcumbObj(breadcumbobj);
        if (this.product.user.averageRating) {
          this.userRating = Math.round(this.product.user.averageRating);
        }
        if (this.product.hidden) {
          this.btnTitle = "Unhide";
        } else {
          this.btnTitle = "Hide";
        }
        
        if (this.product.user.identityId === this.authUser.uid) {
          this.isListingOwner = true;
        }
      } catch (error) {
        console.log(error);
      }
    },

    async getlistingStatistic(offerId) {
      try {
        let url = `/statistics/v1/statistics/offer/oid/${offerId}`;
        const data = await this.$axios.$get(url);
        this.listingStatistics = data.payload;
        console.log("this.listingStatistics", this.listingStatistics);
      } catch (error) {
        console.log(error);
      }
    },

    spliceBreadcumbObj(ListingDetails) {
      const breadcrumbArray = ListingDetails.category.hierarchy;
      if (breadcrumbArray.length > 4) {
        const spliceObj = breadcrumbArray.slice(
          breadcrumbArray.length - 3,
          breadcrumbArray.length
        );
        return spliceObj;
      } else {
        return breadcrumbArray;
      }
    },

    getBreadcumbObj(BreadcumObj) {
      const breadcumArray = [];
      console.log("BreadcumObj:::", BreadcumObj);
      for (var i = 0; i < BreadcumObj.length; i++) {
        breadcumArray.push({
          name: BreadcumObj[i].label,
          link: `/category?cid=${BreadcumObj[i].categoryId}`,
          show: true,
          click: true,
        });
      }

      breadcumArray[breadcumArray.length - 1].link = "";
      breadcumArray[breadcumArray.length - 1].click = false;
      return breadcumArray;
    },
    async preViewFile(doc) {
      window.open(doc.url);
      return;
      const headers = {
        "Access-Control-Allow-Origin": "*",
      };
      try {
        let url = doc.url;
        const data = await this.$axios.$get(
          url,
          { responseType: "blob" },
          headers
        );
        console.log("data", data);
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "abc";
        link.click();
        URL.revokeObjectURL(link.href);
      } catch (error) {
        console.log(error);
      }
    },

    transformDate(value) {
      if (value) {
        return moment(value).format(" MMMM D , YYYY, h:mm:ss a");
      }
    },
    preViewimage(imageUrl) {
      this.viewImage = imageUrl;
      console.log("this.viewImage", this.viewImage);
    },
    openModal() {
      this.showmodal = true;
      console.log("====================", this.showmodal);
    },
    deleteListing() {
      console.log("Delete");
      (this.deletedItemDetails.offerId = this.offerId),
        (this.deletedItemDetails.showdeletemodal = true),
        (this.deletedItemDetails.offerImgUrl = this.product.images[0].url),
        (this.deletedItemDetails.listingName = this.product.name);

      this.showdeletemodal = true;
    },

    hideListing() {
      (this.hidingItemDetails.offerId = this.offerId),
        (this.hidingItemDetails.showhidelistingmodal = true),
        (this.hidingItemDetails.offerImgUrl = this.product.images[0].url),
        (this.hidingItemDetails.listingName = this.product.name),
        (this.hidingItemDetails.listingStaus = this.product.hidden);
      this.showhidelistingmodal = true;
    },

    checkListingStatus(listingstatus) {
      if (listingstatus) {
        return "Unhide";
      } else {
        return "Hide";
      }
    },
  },
};
</script>


